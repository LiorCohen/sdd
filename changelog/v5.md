# Changelog - Version 5.x

All notable changes for major version 5 of the SDD plugin.

---

## [5.0.1] - 2026-01-29

### Enhanced

- **typescript-standards skill (Task 45)**: Added banned mutable operations section
  - Banned: `.push()`, `.pop()`, `.shift()`, `.unshift()`, `.splice()`, `.sort()`, `.reverse()`, `.fill()`
  - Banned object mutations: `obj.prop = value`, `delete obj.prop`, `Object.assign()`
  - Banned Map/Set mutations: `.set()`, `.delete()`, `.add()`, `.clear()`
  - Documented alternatives using spread operators, `reduce`, `flatMap`, `toSorted()`, `toReversed()`

### Changed

- **Refactor: Immutable patterns across codebase**: Full compliance with typescript-standards
  - `scaffolding.ts`: Rewrote with `mergeItems`, `reduce`, `flatMap`, `Object.fromEntries`
  - `domain-population.ts`: Converted to `Promise.all`, `reduce` for parallel operations
  - `generate-snapshot.ts`, `generate-index.ts`: Replaced loops with `reduce`, `flatMap`
  - `validate-spec.ts`: Refactored to return arrays using `filter`/`map`
  - `spec-utils.ts`: Rewrote `walkDir` using `Promise.all` and `.flat()`
  - Test files: Applied same patterns, created collector closures for stream handling

---

## Infrastructure - 2026-01-29

### Added

- **GitHub Actions release workflow (Task 51)**: Automated releases on plugin version changes
  - Workflow at `.github/workflows/release.yml`
  - Triggers on push to main, compares version in `.claude-plugin/marketplace.json`
  - Extracts changelog entry for the version using awk
  - Creates GitHub release with `v{version}` tag via `gh release create`
  - No third-party actions - uses only `actions/checkout@v4` and GitHub CLI

- **Split CHANGELOG into per-major-version files (Task 55)**: File size exceeded Claude's limit
  - Created `changelog/` directory with `index.md` and `v1.md` through `v5.md`
  - Root `CHANGELOG.md` now serves as index with version table + latest entries
  - Updated commit skill to document two-file changelog update requirement
  - Each major version's full history preserved in dedicated file

---

## [5.0.0] - 2026-01-28

### Changed

- **BREAKING: Directory restructure (Task 9)**: Change specs now live at project root
  - `specs/changes/` → `changes/` (change specifications)
  - `specs/external/` → `archive/` (archived external specs, audit only)
  - Added `.claudeignore` with `archive/` ignored
  - Added `.gitkeep` files for empty directories

- **BREAKING: Remove greetings example**: Clean slate approach for new projects
  - Deleted all greeting-related files from backend, frontend, and contract templates
  - Empty barrel exports with helpful comments guide users to add their own features
  - User's first feature IS the example

- **Backend templates**: PostgreSQL database support
  - Replaced in-memory database hack with real PostgreSQL using `pg` package
  - Added `databaseUrl` to config
  - Added `pg` and `@types/pg` dependencies

- **Simplified completion reports**: Focus on next steps
  - Without external spec: guides to `/sdd-new-change`
  - With external spec: lists created changes and guides to `/sdd-implement-change`

### Rationale

The greetings example violated SDD principles (code with no spec) and the in-memory database masked real requirements. A clean skeleton with helpful comments is more honest and practical - the user's first feature becomes the learning example.

---

## Infrastructure - 2026-01-28

### Added

- **Task management skill (Task 19)**: New marketplace skill at `.claude/skills/tasks/`
  - Commands: `/tasks`, `/tasks add`, `/tasks complete`, `/tasks merge`, `/tasks prioritize`, `/tasks plan`, `/tasks plans`
  - Manage backlog, track progress, create implementation plans
  - Reorganized task data into `tasks/` directory (TASKS.md + plans/)

- **Task 9 plan**: Comprehensive plan for ready-to-work components
  - Merge Task #42 (restructure specs directory) into Task #9
  - 9 files to delete, 6 to create, 39 to modify
  - Remove greetings example, use PostgreSQL via k8s, restructure specs directory

- **Task 51 plan**: GitHub Actions workflow for automated releases
  - Create releases on plugin version changes
  - Extract changelog entry as release notes

### Changed

- **Commit skill**: Added Step 4 "Tasks & Plans Check" to verify tasks and plans are updated before committing
  - Checks if commit completes a task
  - Verifies plan status is updated
  - Prompts for new tasks when follow-up work is needed
