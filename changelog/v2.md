# Changelog - Version 2.x

All notable changes for major version 2 of the SDD plugin.

---

## [2.3.0] - 2026-01-21

### Added

- **Multi-feature decomposition for external specs**
  - `skills/spec-decomposer/SKILL.md`: Pure analysis skill that takes spec content and returns structured decomposition result
  - Identifies features based on: section headers, API namespaces, user story clusters, domain entities
  - Detects dependencies between features and suggests implementation order
  - Returns `DecompositionResult` with features, shared concepts, warnings, and suggested order
  - Supports merge/split/rename operations on the result
  - When `sdd-init --spec` is used:
    - Calls spec-decomposer skill to analyze the spec
    - Presents results to user for approval (merge, split, rename, accept, or keep as single)
    - Creates feature directories using feature-creation skill
  - Each feature gets its own `specs/features/YYYY/MM/DD/<feature-name>/` directory with SPEC.md and PLAN.md
  - INDEX.md tracks all features with External Specifications table

- **Feature creation skill for reusable feature scaffolding**
  - `skills/feature-creation/SKILL.md`: Centralized logic for creating feature specs and plans
  - Creates feature directory, SPEC.md, PLAN.md, and updates INDEX.md
  - Supports optional parameters: external_source, decomposition_id, prerequisites
  - Used by both `/sdd-init --spec` and `/sdd-new-feature`

### Changed

- **sdd-init Step 5 restructured**: Now has substeps 5.1-5.6 for decomposition workflow
- **sdd-new-feature simplified**: Steps 4-6 now reference the `feature-creation` skill

## [2.2.2] - 2026-01-21

### Changed

- **sdd-init requires --name argument**: Shows usage when invoked without arguments instead of starting interactive prompts. `--name` is now required.

## [2.2.1] - 2026-01-21

### Changed

- **sdd-init deduplication**: Removed redundant scaffold instructions, now references scaffold skill for details. Fixed step numbering.

## [2.2.0] - 2026-01-21

### Added

- **Scaffold skill for fast project creation**
  - `skills/scaffold/scaffold.py`: Python script that creates project structure in seconds
  - `skills/scaffold/scaffold.md`: Skill documentation
  - Reduces /sdd-init scaffolding time from ~5 minutes to ~5 seconds
  - Creates 30 directories and 54 files with variable substitution

### Changed

- **sdd-init now uses scaffold skill**: Phase 4 calls Python script instead of file-by-file creation

## [2.1.0] - 2026-01-21

### Added

- **Plugin test framework**
  - `tests/test-helpers.sh`: Core utilities for running Claude and asserting results
  - `tests/run-all-tests.sh`: Test runner with fast/integration/all modes
  - `tests/fast/test-sdd-init.sh`: Verifies /sdd-init creates expected project structure
  - `tests/fast/test-sdd-new-feature.sh`: Verifies correct agents are invoked
  - `tests/integration/test-full-stack-init.sh`: Full workflow test (init → build → run)
  - `tests/prompts/`: Test input prompts for automated testing
  - Based on approach from obra/superpowers repository using `claude -p` with stream-json output

## [2.0.6] - 2026-01-21

### Added

- **Runnable hello world templates**
  - Server: Working Express server with `/health` endpoint
  - Server: Added `dotenv` dependency
  - Webapp: Added `index.html` entry point
  - Webapp: Added `vite.config.ts` with React plugin and API proxy
  - Webapp: Added `tailwind.config.js` and `postcss.config.js`
  - Webapp: Added Tailwind CSS dependencies (`tailwindcss`, `postcss`, `autoprefixer`)
  - Updated `sdd-init.md` to copy new template files

## [2.0.5] - 2026-01-19

### Changed

- **Config component is now always required**
  - Config is auto-included for all project types (Full-Stack, Backend API, Frontend Only, Custom)
  - Added Config to "Frontend Only" project type
  - Changed Config dependency from "Server" to "-" (no dependencies)
  - Updated validation rules: Config is always auto-included
  - Config directory and files are now created in "Always create" section

## [2.0.4] - 2026-01-19

### Fixed

- **Helm and Config component dependencies**: Corrected to require Server only
  - Helm requires Server (Kubernetes deployment is for backend services)
  - Config requires Server (frontend config is handled differently)
  - Removed "or Webapp" from Helm and Config dependencies

## [2.0.3] - 2026-01-19

### Changed

- **sdd-init component selection with dependencies**
  - Replaced flat component list with project type options:
    - **Full-Stack Application**: Contract, Server, Webapp, Config, Testing, CI/CD
    - **Backend API Only**: Contract, Server, Config, Testing, CI/CD
    - **Frontend Only**: Webapp, Testing, CI/CD
    - **Custom**: Manual selection with dependency validation
  - Added component dependency table (e.g., Contract requires Server, Helm requires Server)
  - Added validation rules to prevent invalid combinations
  - Contract is no longer "always included" - only with Server
  - Integrated Config component into sdd-init workflow

## [2.0.2] - 2026-01-19

### Added

- **`sdd_version` field required in all specs and plans**
  - Added to frontmatter requirements in `spec-writing` skill
  - Added to plan template in `planning` skill
  - Updated `spec-writer` agent to include version requirement
  - Updated `planner` agent to include version in generated plans
  - Updated `sdd-new-feature` command to read and inject plugin version
  - Updated `sdd-init` command to include version in imported specs

### Rationale

Tracking the SDD plugin version in specs and plans enables:
- **Compatibility tracking**: Know which plugin version generated a spec
- **Migration support**: Identify specs that may need updating after plugin changes
- **Debugging**: Trace issues to specific plugin versions

## [2.0.1] - 2026-01-19

### Added

- **Config component template** (`templates/components/config/`)
  - JSON Schema for configuration validation (`schemas/schema.json`)
  - Separate schemas for ops config (`ops-schema.json`) and app config (`app-schema.json`)
  - Environment-specific YAML configs: `config.yaml` (base), `config-local.yaml`, `config-testing.yaml`, `config-production.yaml`
  - Ops config covers: server, database, logging, telemetry
  - App config is extensible per project (no predefined semantics)

**Note:** This component is not yet active. Missing:
- Agent for config management
- Skill for config validation
- Integration with sdd-init command

## [2.0.0] - 2026-01-19

### Breaking Changes

- **Renamed Server layer to App layer** in backend 5-layer architecture
  - `src/server/` directory → `src/app/`
  - `createServer` function → `createApp`
  - `Server` type → `App` type
  - Updated all references in backend-dev agent
  - Updated sdd-init command directory creation and file copy paths
  - Updated template files with new naming

### Migration Guide

For existing projects using the 1.x structure:
1. Rename `src/server/` directory to `src/app/`
2. Rename `create_server.ts` to `create_app.ts`
3. Update function name `createServer` → `createApp`
4. Update type names `Server` → `App`, `ServerDependencies` → `AppDependencies`
5. Update imports in `src/index.ts`: `import { createApp } from './app'`

### Rationale

The "Server" layer name was confusing because it conflicted with the "server" component name (`components/server`). Renaming to "App" provides:
- **Clarity**: Clear distinction between the component (`components/server`) and the layer (`src/app/`)
- **Consistency**: App layer creates and manages the application lifecycle
- **Semantic accuracy**: The layer handles more than just HTTP server concerns (middleware, routes, graceful shutdown, database connections)
